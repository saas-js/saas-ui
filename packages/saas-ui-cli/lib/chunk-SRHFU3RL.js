import{existsSync as m,readFileSync as b}from"fs";import f from"path";async function w(o){let e=f.join(o,"package.json");if(!m(e))return{isMonorepo:!1};let s=JSON.parse(b(e,"utf8")).name,u=s&&/^@[^/]+\/[^/]+/.test(s),t=o,c=0,h=5;for(;c<h;){if(m(f.join(t,"turbo.json")))return{isMonorepo:!0,root:t,packageName:s,type:"turborepo"};if(m(f.join(t,"pnpm-workspace.yaml")))return{isMonorepo:!0,root:t,packageName:s,type:"pnpm"};let l=f.join(t,"package.json");if(m(l)&&t!==o)try{let k=JSON.parse(b(l,"utf8"));if(k.workspaces)return{isMonorepo:!0,root:t,packageName:s,type:Array.isArray(k.workspaces)?"npm":"yarn"}}catch{continue}let g=f.dirname(t);if(g===t)break;t=g,c++}return u?{isMonorepo:!0,packageName:s}:{isMonorepo:!1}}function d(o){return Object.values(o).some(a=>/^@[^/]+\/[^/]+/.test(a))}import{cyan as j,green as v,red as P,yellow as M}from"kleur/colors";var i={error:P,warn:M,info:j,success:v};import{cosmiconfig as S}from"cosmiconfig";import p from"path";import{loadConfig as E}from"tsconfig-paths";import{z as r}from"zod";import{createMatchPath as C}from"tsconfig-paths";async function x(o,e){return C(e.absoluteBaseUrl,e.paths)(o,void 0,()=>!0,[".ts",".tsx"])}var Y="@/components",Z="@/lib/utils",$=S("components",{searchPlaces:["components.json"]}),y=r.object({$schema:r.string().optional(),system:r.string().optional().default("chakra"),style:r.string().optional().default("default"),rsc:r.coerce.boolean().default(!1),tsx:r.coerce.boolean().default(!0),registries:r.record(r.string(),r.union([r.string(),r.object({url:r.string(),headers:r.record(r.string(),r.string()).optional(),params:r.record(r.string(),r.string()).optional()})])).optional(),aliases:r.object({components:r.string(),utils:r.string(),ui:r.string().optional(),lib:r.string().optional(),hooks:r.string().optional()})}).strict(),A=y.extend({resolvedPaths:r.object({cwd:r.string(),utils:r.string(),components:r.string(),lib:r.string(),hooks:r.string(),ui:r.string()})});async function q(o){let e=await R(o);return e?await I(o,e):null}async function I(o,e){let s=(await w(o)).isMonorepo||d(e.aliases),u=E(o);if(u.resultType==="failed")throw new Error(`Failed to load ${e.tsx?"tsconfig":"jsconfig"}.json. ${u.message??""}`.trim());let t=async c=>{if(s&&/^@[^/]+\/[^/]+/.test(c)){let l=c.match(/^@[^/]+\/[^/]+\/(.+)$/);if(l&&l[1]){let g=l[1];return p.resolve(o,"src",g)}return p.resolve(o,"src")}return await x(c,u)??p.resolve(o,"src")};return A.parse({...e,resolvedPaths:{cwd:o,utils:await t(e.aliases.utils),components:await t(e.aliases.components),ui:e.aliases.ui?await t(e.aliases.ui):p.resolve(await t(e.aliases.components),"ui"),lib:e.aliases.lib?await t(e.aliases.lib):p.resolve(await t(e.aliases.utils),".."),hooks:e.aliases.hooks?await t(e.aliases.hooks):p.resolve(await t(e.aliases.components),"..","hooks")}})}async function R(o){try{let e=await $.search(o);return e?y.parse(e.config):null}catch{let a=`${o}/components.json`;throw new Error(`Invalid configuration found in ${i.info(a)}.`)}}var n={error(...o){console.log(i.error(o.join(" ")))},warn(...o){console.log(i.warn(o.join(" ")))},info(...o){console.log(i.info(o.join(" ")))},success(...o){console.log(i.success(o.join(" ")))},debug(...o){process.env.DEBUG&&console.log(o.join(" "))},log(...o){console.log(o.join(" "))},break(){console.log("")}};import{z as T}from"zod";function to(o){if(n.error("Something went wrong. Please check the error below for more details."),n.error("If the problem persists, please open an issue on GitHub."),n.error(""),typeof o=="string"&&(n.error(o),n.break(),process.exit(1)),o instanceof T.ZodError){n.error("Validation failed:");let e=Object.entries(o.flatten().fieldErrors);if(e.length>0)for(let[a,s]of e)n.error(`- ${i.info(a)}: ${s}`);else n.error(o.message);n.break(),process.exit(1)}o instanceof Error&&(n.error(o.message),n.break(),process.exit(1)),n.break(),process.exit(1)}export{w as a,i as b,Y as c,Z as d,y as e,q as f,I as g,R as h,n as i,to as j};
//# sourceMappingURL=chunk-SRHFU3RL.js.map