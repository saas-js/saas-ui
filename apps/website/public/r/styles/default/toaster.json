{
  "name": "toaster",
  "type": "registry:ui",
  "dependencies": [
    "@chakra-ui/react"
  ],
  "registryDependencies": [
    "close-button",
    "spinner"
  ],
  "files": [
    {
      "path": "ui/toaster/index.ts",
      "content": "export { Toaster, toast } from './toaster.tsx'\n\nexport type { ToasterProps } from './toaster.tsx'\n",
      "type": "registry:ui"
    },
    {
      "path": "ui/toaster/toaster.stories.tsx",
      "content": "import React from 'react'\n\nimport { Button, HStack } from '@chakra-ui/react'\n\nimport { Toaster, toast } from './index.ts'\n\nexport default {\n  title: 'Components/Toaster',\n  decorators: [\n    (Story) => (\n      <>\n        <Toaster overlap />\n        <Story />\n      </>\n    ),\n  ],\n}\n\nexport const Default = () => {\n  return (\n    <HStack>\n      <Button\n        onClick={() => toast.create({ title: 'Changes saved successfully' })}\n      >\n        Default toast\n      </Button>\n      <Button\n        onClick={() => toast.success({ title: 'Changes saved successfully' })}\n      >\n        Success toast\n      </Button>\n      <Button\n        onClick={() =>\n          toast.error({\n            title: 'Something went wrong',\n            description:\n              'Please try again or contact support if the issue persists.',\n          })\n        }\n      >\n        Error toast\n      </Button>\n      <Button\n        onClick={() =>\n          toast.create({\n            type: 'warning',\n            title: 'Connection disrupted',\n            description: 'Please check your internet connection.',\n          })\n        }\n      >\n        Warning toast\n      </Button>\n      <Button\n        onClick={() =>\n          toast.success({\n            title: 'Task created',\n            description: 'TSK-123456',\n            action: { label: 'View task', onClick: () => alert('Clicked') },\n          })\n        }\n      >\n        Toast with action\n      </Button>\n      <Button\n        onClick={() =>\n          toast.promise(\n            new Promise((resolve) => {\n              setTimeout(() => resolve('Task created'), 1000)\n            }),\n            {\n              loading: {\n                title: 'Creating your account',\n              },\n              success: {\n                title: 'Account created',\n              },\n              error: {\n                title: 'Error',\n              },\n            },\n          )\n        }\n      >\n        Promise\n      </Button>\n    </HStack>\n  )\n}\n",
      "type": "registry:story"
    },
    {
      "path": "ui/toaster/toaster.tsx",
      "content": "'use client'\n\nimport React, { useCallback, useMemo, useState } from 'react'\n\nimport { Portal } from '@chakra-ui/react/portal'\nimport { Stack } from '@chakra-ui/react/stack'\nimport {\n  Toaster as ChakraToaster,\n  type CreateToasterProps,\n  CreateToasterReturn,\n  Toast,\n  createToaster,\n} from '@chakra-ui/react/toast'\n\nimport { CloseButton } from '../close-button/index.ts'\nimport { Spinner } from '../spinner/index.ts'\n\nexport type { CreateToasterProps, CreateToasterReturn }\n\nconst defaultOptions: CreateToasterProps = {\n  placement: 'bottom-end',\n  pauseOnPageIdle: true,\n}\n\nexport let toast = createToaster(defaultOptions) as CreateToasterReturn\n\nexport interface ToasterProps extends Partial<CreateToasterProps> {\n  closable?: boolean\n}\n\nexport const Toaster = (props?: ToasterProps) => {\n  const { closable: defaultClosable = true, ...options } = props || {}\n\n  const toaster = useMemo(() => {\n    toast = createToaster({\n      ...defaultOptions,\n      ...options,\n    })\n\n    return toast\n  }, [options])\n\n  return (\n    <Portal>\n      <ChakraToaster toaster={toaster} insetInline={{ mdDown: '4' }}>\n        {(toast) => {\n          const closable =\n            toast.meta?.closable === false\n              ? false\n              : defaultClosable && toast.type !== 'loading'\n\n          return (\n            <ToastRoot>\n              {toast.type === 'loading' ? (\n                <Spinner size=\"sm\" color=\"colorPalette.solid\" mt=\"0.5\" />\n              ) : (\n                <Toast.Indicator />\n              )}\n              <Stack gap=\"1\" flex=\"1\" maxWidth=\"100%\">\n                {toast.title && <Toast.Title>{toast.title}</Toast.Title>}\n                {toast.description && (\n                  <Toast.Description>{toast.description}</Toast.Description>\n                )}\n\n                {toast.action && (\n                  <Toast.ActionTrigger>\n                    {toast.action.label}\n                  </Toast.ActionTrigger>\n                )}\n              </Stack>\n\n              {closable !== false && (\n                <Toast.CloseTrigger asChild>\n                  <CloseButton size=\"xs\" />\n                </Toast.CloseTrigger>\n              )}\n            </ToastRoot>\n          )\n        }}\n      </ChakraToaster>\n    </Portal>\n  )\n}\n\n/**\n * Since the height of the toast is dynamic, we need to set the height\n * in the CSS variable `--toast-height` so css transitions can be applied.\n */\nfunction ToastRoot(props: { children: React.ReactNode }) {\n  const [rect, setRect] = useState<DOMRect>()\n\n  const rectCallbackRef = useCallback((el: HTMLDivElement) => {\n    setRect(el?.getBoundingClientRect())\n  }, [])\n\n  return (\n    <Toast.Root\n      ref={rectCallbackRef}\n      width={{ md: 'sm' }}\n      css={{\n        '--toast-height': `${rect?.height}px`,\n      }}\n    >\n      {props.children}\n    </Toast.Root>\n  )\n}\n",
      "type": "registry:ui"
    }
  ]
}