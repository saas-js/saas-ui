{
  "name": "search-input",
  "type": "registry:ui",
  "dependencies": [
    "@chakra-ui/react",
    "@saas-ui/core"
  ],
  "registryDependencies": [
    "close-icon",
    "search-icon"
  ],
  "files": [
    {
      "path": "ui/search-input/index.ts",
      "content": "export { SearchInput } from './search-input.tsx'\nexport type { SearchInputProps } from './search-input.tsx'\n",
      "type": "registry:ui"
    },
    {
      "path": "ui/search-input/search-input.stories.tsx",
      "content": "import React, { useState } from 'react'\n\nimport { Container, Stack } from '@chakra-ui/react'\nimport { StoryObj } from '@storybook/react-vite'\nimport { RiCloseLine, RiSearch2Line } from 'react-icons/ri'\n\nimport { SearchInput, SearchInputProps } from './search-input'\n\nexport default {\n  title: 'Components/SearchInput',\n  component: SearchInput,\n  decorators: [\n    (Story: any) => (\n      <Container mt=\"40px\">\n        <Story />\n      </Container>\n    ),\n  ],\n}\n\ntype Story = StoryObj<SearchInputProps>\n\nexport const Basic: Story = {}\n\nexport const Sizes: Story = {\n  render: () => {\n    return (\n      <Stack>\n        <SearchInput size=\"lg\" />\n        <SearchInput size=\"md\" />\n        <SearchInput size=\"sm\" />\n        <SearchInput size=\"xs\" />\n      </Stack>\n    )\n  },\n}\n\nexport const Disabled: Story = {\n  args: {\n    disabled: true,\n  },\n}\n\nexport const CustomIcons: Story = {\n  args: {\n    icon: <RiSearch2Line />,\n    resetIcon: <RiCloseLine />,\n  },\n}\n\nexport const Controlled: Story = {\n  render: (props: any) => {\n    const [value, setValue] = useState('')\n    return (\n      <SearchInput\n        value={value}\n        onChange={({ target }) => setValue(target.value)}\n        onReset={() => setValue('')}\n        {...props}\n      />\n    )\n  },\n}\n",
      "type": "registry:story"
    },
    {
      "path": "ui/search-input/search-input.tsx",
      "content": "'use client'\n\nimport React, { forwardRef } from 'react'\n\nimport {\n  Group,\n  IconButton,\n  type IconButtonProps,\n  Input,\n  InputElement,\n  InputProps,\n  mergeRefs,\n  useControllableState,\n} from '@chakra-ui/react'\nimport { callAll } from '@saas-ui/core/utils'\n\nimport { CloseIcon, SearchIcon } from '../../icons/index.ts'\n\nexport interface SearchInputProps extends InputProps {\n  value?: string\n  defaultValue?: string\n  placeholder?: string\n  icon?: React.ReactElement\n  resetIcon?: React.ReactElement\n  endElement?: React.ReactElement\n  onReset?: () => void\n}\n\nexport const SearchInput = forwardRef<HTMLInputElement, SearchInputProps>(\n  (props, ref) => {\n    const {\n      placeholder = 'Search',\n      value: valueProp,\n      defaultValue: defaultValueProp,\n      size,\n      variant,\n      width = 'full',\n      icon = <SearchIcon />,\n      resetIcon,\n      endElement: endElementProp,\n      onChange: onChangeProp,\n      onReset: onResetProp,\n      onKeyDown: onKeyDownProp,\n      disabled,\n      ...inputProps\n    } = props\n\n    const inputRef = React.useRef<HTMLInputElement>(null)\n\n    const [value, setValue] = useControllableState({\n      value: valueProp,\n      defaultValue: defaultValueProp,\n    })\n\n    const onChange = React.useCallback(\n      (e: React.ChangeEvent<HTMLInputElement>) => {\n        setValue(e.target.value)\n      },\n      [setValue],\n    )\n\n    const onKeyDown = React.useCallback(\n      (event: React.KeyboardEvent) => {\n        if (event.key === 'Escape') {\n          setValue('')\n          onReset()\n        }\n      },\n      [onResetProp, setValue],\n    )\n\n    const onReset = () => {\n      setValue('')\n      onResetProp?.()\n      inputRef.current?.focus()\n    }\n\n    const showReset = value && !props.disabled\n\n    const endElement = showReset ? (\n      <SearchInputResetButton size={size}>{resetIcon}</SearchInputResetButton>\n    ) : (\n      endElementProp\n    )\n\n    return (\n      <Group width={width}>\n        <InputElement\n          placement=\"start\"\n          px=\"0\"\n          aspectRatio=\"9/10\"\n          fontSize={size}\n        >\n          {icon}\n        </InputElement>\n        <Input\n          type=\"text\"\n          placeholder={placeholder}\n          variant={variant}\n          size={size}\n          value={value}\n          disabled={disabled}\n          ref={mergeRefs(ref, inputRef)}\n          onChange={callAll(onChange, onChangeProp)}\n          onKeyDown={callAll(onKeyDown, onKeyDownProp)}\n          ps=\"calc(var(--input-height) - var(--input-height) / 10)\"\n          pe=\"calc(var(--input-height) - var(--input-height) / 10)\"\n          {...inputProps}\n        />\n        <InputElement placement=\"end\">{endElement}</InputElement>\n      </Group>\n    )\n  },\n)\n\nconst SearchInputResetButton = forwardRef<HTMLButtonElement, IconButtonProps>(\n  (props, ref) => {\n    const { children = <CloseIcon />, ...rest } = props\n\n    return (\n      <IconButton\n        ref={ref}\n        variant=\"ghost\"\n        aria-label=\"Reset search\"\n        me=\"-2\"\n        aspectRatio=\"square\"\n        height=\"calc(100% - {spacing.2})\"\n        {...rest}\n      >\n        {children}\n      </IconButton>\n    )\n  },\n)\n\nSearchInput.displayName = 'SearchInput'\n",
      "type": "registry:ui"
    }
  ]
}